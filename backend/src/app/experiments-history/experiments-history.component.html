<div class="experiment-history-complete">

  <!-- Back Button -->
  <button class="btn-back-floating" (click)="goBack()">
    <i class="bi bi-arrow-left"></i>
  </button>
  
  <!-- Title -->
  <h2>Experiment History</h2>

  <!-- Filters Section -->
  <div class="filters-container">
    <div class="flex items-center gap-4">
      <!-- Featured Filter -->
      <label for="statusFilter" class="mr-2">Featured:</label>
      <select id="statusFilter" (change)="updateFeatured($event)">
        <option value="all">All</option>
        <option value="true">Yes</option>
        <option value="false">No</option>
      </select>

      <!-- Sort Order Filters -->
      <label for="sortOrder" class="ml-4 mr-2">Last Viewed:</label>
      <select id="sortOrder" [value]="searchOptions().lastViewed" (change)="updateLastViewed($event)">
        <option [value]="OrderDirection.ASC">Oldest first</option>
        <option [value]="OrderDirection.DESC">Newest first</option>
      </select>

      <label for="sortOrder" class="ml-4 mr-2">Created At:</label>
      <select id="sortOrder" [value]="searchOptions().createdAt" (change)="updateCreatedAt($event)">
        <option [value]="OrderDirection.ASC">Oldest first</option>
        <option [value]="OrderDirection.DESC">Newest first</option>
      </select>
    </div>
  </div>

  <!-- Pagination Top -->
  @if (totalExperiments() > limitExperiments) {
    <div class="pagination">
      <ngb-pagination
        [pageSize]="limitExperiments"
        [collectionSize]="totalExperiments()"
        [(page)]="page"
        (pageChange)="updatePage($event)">
      </ngb-pagination>
    </div>
  }

  <!-- Experiment History Cards -->
  @if (experiments().length === 0) {
    <div class="history-empty">
      @if (searchOptions().featured === undefined) {
        <p>The temporary experiment <b>history</b> is <b>empty</b>.</p>
      } @else {
        <p>No experiments found for the selected filters.</p>
      }
    </div>
  } @else {
    <card-experiment-history
      [experiments]="experiments()"
      [showDescription]="true"
      [history]="true"
    />
  }

  <!-- Pagination Bottom -->
  @if (totalExperiments() > limitExperiments) {
    <div class="pagination">
      <ngb-pagination
        [pageSize]="limitExperiments"
        [collectionSize]="totalExperiments()"
        [(page)]="page"
        (pageChange)="updatePage($event)">
      </ngb-pagination>
    </div>
  }
</div>
